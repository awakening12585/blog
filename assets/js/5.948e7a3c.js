(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{218:function(s,a,n){"use strict";n.r(a);var t=n(0),e=Object(t.a)({},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"content"},[s._m(0),s._v(" "),n("p",[s._v("使用docker 部署nginx")]),s._v(" "),s._m(1),s._v(" "),s._m(2),s._m(3),s._v(" "),s._m(4),s._m(5),s._v(" "),s._m(6),s._m(7),s._v(" "),s._m(8),s._m(9),s._v(" "),n("p",[n("a",{attrs:{href:"https://pan.baidu.com/s/1ndLa_8Ey461hyjhkAb_IgA",target:"_blank",rel:"noopener noreferrer"}},[s._v("百度网盘连接"),n("OutboundLink")],1),s._v(" 提取码: v825")]),s._v(" "),s._m(10),s._m(11),s._v(" "),s._m(12),s._v(" "),s._m(13),s._m(14),s._v(" "),s._m(15)])},[function(){var s=this.$createElement,a=this._self._c||s;return a("h1",{attrs:{id:"confluence-postgresql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#confluence-postgresql","aria-hidden":"true"}},[this._v("#")]),this._v(" confluence & postgresql")])},function(){var s=this.$createElement,a=this._self._c||s;return a("h2",{attrs:{id:"路径约定"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#路径约定","aria-hidden":"true"}},[this._v("#")]),this._v(" 路径约定")])},function(){var s=this.$createElement,a=this._self._c||s;return a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[this._v("|--confluence\n|----confluence-data        //confluence 数据目录\n|----docker-compose.yml\n|----logs                   //confluence 数据目录\n|----pgsql-data             //pgsql 数据目录\n")])]),this._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[this._v("1")]),a("br"),a("span",{staticClass:"line-number"},[this._v("2")]),a("br"),a("span",{staticClass:"line-number"},[this._v("3")]),a("br"),a("span",{staticClass:"line-number"},[this._v("4")]),a("br"),a("span",{staticClass:"line-number"},[this._v("5")]),a("br")])])},function(){var s=this.$createElement,a=this._self._c||s;return a("h2",{attrs:{id:"docker-compose-yml"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#docker-compose-yml","aria-hidden":"true"}},[this._v("#")]),this._v(" docker-compose.yml")])},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("version: "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3.4'")]),s._v("\nservices:\n  confluence:\n    image: cptactionhank/atlassian-confluence:latest\n    container_name: confluence\n    user: root\n    ports:\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8090:8090"')]),s._v("\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"8091:8091"')]),s._v("\n    restart: always\n    depends_on:\n      - db\n    volumes:\n      - ./logs:/opt/atlassian/confluence/logs\n      - ./confluence-data:/var/atlassian/confluence\n  db:\n    image: postgres:9.4\n    container_name: confluence-db\n    user: root\n    ports:\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"5432:5432"')]),s._v("\n    restart: always\n    environment:\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POSTGRES_USER=confluencedb'")]),s._v("\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POSTGRES_PASSWORD=密码'")]),s._v("\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POSTGRES_DB=confluencedb'")]),s._v("\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POSTGRES_ENCODING=UTF8'")]),s._v("\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POSTGRES_COLLATE=C'")]),s._v("\n      - "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'POSTGRES_COLLATE_TYPE=C'")]),s._v("\n    volumes:\n      - ./pgsql-data:/var/lib/postgresql/data\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])])},function(){var s=this.$createElement,a=this._self._c||s;return a("h2",{attrs:{id:"启动"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#启动","aria-hidden":"true"}},[this._v("#")]),this._v(" 启动")])},function(){var s=this.$createElement,a=this._self._c||s;return a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[this._v("docker-compose up -d\n")])]),this._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[this._v("1")]),a("br")])])},function(){var s=this.$createElement,a=this._self._c||s;return a("h3",{attrs:{id:"访问"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#访问","aria-hidden":"true"}},[this._v("#")]),this._v(" 访问")])},function(){var s=this.$createElement,a=this._self._c||s;return a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[this._v("访问IP:8090  记录下来server "),a("span",{pre:!0,attrs:{class:"token function"}},[this._v("id")]),this._v("\n")])]),this._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[this._v("1")]),a("br")])])},function(){var s=this.$createElement,a=this._self._c||s;return a("h3",{attrs:{id:"破解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#破解","aria-hidden":"true"}},[this._v("#")]),this._v(" 破解")])},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("//查看容器id\ndocker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("ps")]),s._v("\n//从容器中复制下来\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v("  d45ec455a4f7:/opt/atlassian/confluence/confluence/WEB-INF/lib/atlassian-extras-decoder-v2-3.4.1.jar ./atlassian-extras-2.4.jar\n//下载到本地\nsz atlassian-extras-2.4.jar\n//解压破解工具压缩包后运行confluence_keygen.jar\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 输入name 和 server "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("id")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" 点击.gen 生成密钥并记录\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" 点击.path 选择atlassian-extras-2.4.jar\n"),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" 破解成功同目录显示atlassian-extras-2.4.jar.bak\n//把atlassian-extras-2.4.jar 文件上传到服务器\n//然后复制到容器中\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v("  ./atlassian-extras-2.4.jar d45ec455a4f7:/opt/atlassian/confluence/confluence/WEB-INF/lib/atlassian-extras-decoder-v2-3.4.1.jar \n//停止重启\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker-compose stop "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker-compose start\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br")])])},function(){var s=this.$createElement,a=this._self._c||s;return a("h2",{attrs:{id:"创建pgsql数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建pgsql数据库","aria-hidden":"true"}},[this._v("#")]),this._v(" 创建pgsql数据库")])},function(){var s=this.$createElement,a=this._self._c||s;return a("blockquote",[a("p",[this._v("上面docker-compose.yml 中已经配置了,下面操作可以不做")])])},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("进入pgsql容器：docker "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exec")]),s._v(" -it xxxxxx "),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("  \npsql -U postgres  \n查询用户："),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("l\n创建数据库：CREATE DATABASE confluence WITH OWNER postgres"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n退出："),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("q\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])])},function(){var s=this.$createElement,a=this._self._c||s;return a("h3",{attrs:{id:"配置-pg-hba-conf"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#配置-pg-hba-conf","aria-hidden":"true"}},[this._v("#")]),this._v(" 配置 pg_hba.conf")])},function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("div",{staticClass:"language-bash line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[s._v("//进入 pgsql-data 目录\n"),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" pgsql-data\n// 打开文件\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" pg_hba.conf\n//在文件末尾\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("host")]),s._v(" all all all trust\n// 重启数据库\ndocker restart 容器id\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br")])])}],!1,null,null,null);a.default=e.exports}}]);