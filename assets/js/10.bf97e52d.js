(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{213:function(a,s,t){"use strict";t.r(s);var e=t(0),r=Object(e.a)({},function(){var a=this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"修改docker默认存储地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改docker默认存储地址","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改docker默认存储地址")]),a._v(" "),t("p",[a._v("docker中默认存放镜像和容器的目录是：/var/lib/docker/,我们常常遇到问题是服务器的系统盘很小导致磁盘空间不够,这里针对这个问题提供了解决方案")]),a._v(" "),t("h2",{attrs:{id:"查看磁盘"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看磁盘","aria-hidden":"true"}},[a._v("#")]),a._v(" 查看磁盘")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("查看服务器磁盘,找一个相对比较大的磁盘,这里已 /data 目录为例\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("df")]),a._v(" -h \n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h2",{attrs:{id:"创建需要目录"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建需要目录","aria-hidden":"true"}},[a._v("#")]),a._v(" 创建需要目录")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mkdir")]),a._v(" -p /data/lib/docker_data\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"迁移数据"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#迁移数据","aria-hidden":"true"}},[a._v("#")]),a._v(" 迁移数据")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[a._v("cp")]),a._v(" -R /var/lib/docker/* /data/lib/docker_data/\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"修改配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#修改配置文件","aria-hidden":"true"}},[a._v("#")]),a._v(" 修改配置文件")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("//如果对应的目录/文件不存在新建即可\n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("vim")]),a._v(" /etc/docker/daemon.json\n//添加如下数据 data-root 默认地址\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"registry-mirrors"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("[")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"https://registry.docker-cn.com"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("]")]),a._v(",\n    "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"data-root"')]),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/data/lib/docker_data"')]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br")])]),t("h2",{attrs:{id:"使配置生效"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使配置生效","aria-hidden":"true"}},[a._v("#")]),a._v(" 使配置生效")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl daemon-reloadreload\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h2",{attrs:{id:"重启docker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#重启docker","aria-hidden":"true"}},[a._v("#")]),a._v(" 重启docker")]),a._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[a._v("systemctl restart docker  //重启\nsystemctl start docker  //启动\nsystemctl stop docker //停止\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h2",{attrs:{id:"注意"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#注意","aria-hidden":"true"}},[a._v("#")]),a._v(" 注意")]),a._v(" "),t("ul",[t("li",[a._v("如果操作完成后,在启动镜像容器时候失败,将镜像删除重新pull下来即可")])])])}],!1,null,null,null);s.default=r.exports}}]);